(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(28),l=n.n(s),r=(n(37),n(2)),i=(n(38),n(4)),o=n.n(i),j=n(3),d=n(5),b=n(0),u=function(e){return Object(b.jsxs)("div",{children:[e.label&&Object(b.jsx)("label",{htmlFor:e.id,className:"leading-7 text-sm text-gray-600",children:e.label}),Object(b.jsx)("input",{type:e.type?e.type:"text",value:e.value,onChange:e.onChange,id:e.id,name:e.name,className:"w-full bg-white rounded border border-gray-300 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"})]})},x=function(e){return Object(b.jsx)("button",{className:"".concat("secondary"===e.color?"text-gray-700 bg-gray-100 hover:bg-gray-200":"bg-yellow-500 text-white hover:bg-yellow-600"," mx-auto border-0 py-2 px-8 focus:outline-none rounded text-lg ").concat(e.tailwind),onClick:e.onClick,type:e.type,children:e.children})},m=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),l=Object(j.a)(s,2),i=l[0],m=l[1],h=Object(c.useState)(""),O=Object(j.a)(h,2),g=O[0],f=O[1],p=Object(c.useState)(void 0),v=Object(j.a)(p,2),y=v[0],w=v[1],N=Object(r.g)();return Object(b.jsx)("section",{className:"text-black body-font bg-background-nft bg-cover h-full",children:Object(b.jsxs)("div",{className:"container px-5 py-24 mx-auto flex flex-wrap items-center",children:[Object(b.jsxs)("div",{className:"lg:w-3/5 md:w-1/2 md:pr-16 lg:pr-0 pr-0",children:[Object(b.jsx)("h1",{className:"title-font font-medium text-3xl text-black",children:"SurvIt"}),Object(b.jsx)("p",{className:"leading-relaxed mt-4 text-gray-800",children:"Manage and access popup surveys. Get quick feedback faster than ever before."})]}),Object(b.jsx)("div",{className:"lg:w-2/6 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col md:ml-auto w-full mt-10 md:mt-0",children:Object(b.jsxs)("div",{className:"relative mb-4",children:[Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:n,password:g,name:i};o.a.post("api/auth/signup",t).then((function(e){N("/login")})).catch((function(e){var t=e.response.data.message;w(t)}))},children:[Object(b.jsx)("h2",{className:"text-gray-900 text-lg mb-1 font-medium title-font",children:"Sign Up"}),Object(b.jsx)("div",{className:"relative mb-4",children:Object(b.jsx)(u,{id:"email",label:"Email",value:n,onChange:function(e){return a(e.target.value)}})}),Object(b.jsx)("div",{className:"relative mb-4",children:Object(b.jsx)(u,{id:"name",label:"Username",value:i,onChange:function(e){return m(e.target.value)}})}),Object(b.jsx)("div",{className:"relative mb-4",children:Object(b.jsx)(u,{id:"password",label:"Password",value:g,onChange:function(e){return f(e.target.value)}})}),Object(b.jsx)(x,{tailwind:"w-full",type:"submit",children:"Login"})]}),y&&Object(b.jsx)("p",{className:"text-xs text-red-500 mt-3",children:y}),Object(b.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:["Already have an account?"," ",Object(b.jsx)(d.b,{className:"text-sm text-blue-500 hover:underline",to:"/login",children:"Click here to login."})]})]})})]})})},h=n(14),O=n.n(h),g=n(29),f=a.a.createContext();function p(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1],l=Object(c.useState)(null),r=Object(j.a)(l,2),i=r[0],d=r[1],u=Object(c.useState)(!0),x=Object(j.a)(u,2),m=x[0],h=x[1],p=function(){var e=Object(g.a)(O.a.mark((function e(){var t,n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("authToken"))){e.next=20;break}return e.prev=2,e.next=5,o.a.get("api/auth/verify",{headers:{Authorization:"Bearer ".concat(t)}});case 5:n=e.sent,console.log(n),c=n.data,d(c),s(!0),h(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),s(!1),d(null),h(!1);case 18:e.next=21;break;case 20:h(!1);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){p()}),[]),Object(b.jsx)(f.Provider,{value:{isLoggedIn:a,user:i,isLoading:m,loginUser:function(e){return localStorage.setItem("authToken",e),p()},logoutUser:function(){localStorage.removeItem("authToken"),s(!1),d(null)}},children:e.children})}var v=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),l=Object(j.a)(s,2),i=l[0],m=l[1],h=Object(c.useState)(void 0),O=Object(j.a)(h,2),g=O[0],p=O[1],v=Object(r.g)(),y=Object(c.useContext)(f).loginUser;return Object(b.jsx)("section",{className:"text-black body-font bg-background-nft bg-cover h-full",children:Object(b.jsxs)("div",{className:"container px-5 py-24 mx-auto flex flex-wrap items-center",children:[Object(b.jsxs)("div",{className:"lg:w-3/5 md:w-1/2 md:pr-16 lg:pr-0 pr-0",children:[Object(b.jsx)("h1",{className:"title-font font-medium text-3xl text-black",children:"SurvIt"}),Object(b.jsx)("p",{className:"leading-relaxed mt-4 text-gray-800",children:"Manage and access popup surveys. Get quick feedback faster than ever before."})]}),Object(b.jsx)("div",{className:"lg:w-2/6 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col md:ml-auto w-full mt-10 md:mt-0",children:Object(b.jsxs)("div",{className:"relative mb-4",children:[Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:n,password:i};o.a.post("api/auth/login",t).then((function(e){console.log("bearer token:",e.data.authToken);var t=e.data.authToken;y(t).then((function(e){return v("/")}))})).catch((function(e){var t=e.response.data.message;p(t)}))},children:[Object(b.jsx)("h2",{className:"text-gray-900 text-lg mb-1 font-medium title-font",children:"Login"}),Object(b.jsx)("div",{className:"relative mb-4",children:Object(b.jsx)(u,{id:"email",label:"Email",value:n,onChange:function(e){return a(e.target.value)}})}),Object(b.jsx)("div",{className:"relative mb-4",children:Object(b.jsx)(u,{id:"password",label:"Password",value:i,type:"password",onChange:function(e){return m(e.target.value)}})}),Object(b.jsx)(x,{tailwind:"w-full",type:"submit",children:"Login"})]}),g&&Object(b.jsx)("p",{className:"text-xs text-red-500 mt-3",children:g}),Object(b.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:["No account yet? click"," ",Object(b.jsx)(d.b,{className:"text-sm text-blue-500 hover:underline",to:"/signup",children:"Click here to register."})]})]})})]})})},y=function(){var e=Object(c.useContext)(f),t=e.isLoggedIn,n=(e.user,e.logoutUser);return Object(b.jsxs)("nav",{children:[Object(b.jsx)(d.b,{to:"/",children:Object(b.jsx)("button",{children:"Home"})}),t?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.b,{to:"/my-polls",children:Object(b.jsx)("button",{children:"My Polls"})}),Object(b.jsx)("button",{onClick:n,children:"Logout"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.b,{to:"/signup",children:Object(b.jsx)("button",{children:"Signup"})}),Object(b.jsx)(d.b,{to:"/login",children:Object(b.jsx)("button",{children:"Login"})})]})]})},w=n(10),N=n(68),k=function(){var e=Object(c.useState)("asd"),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([{text:"",id:Object(N.a)()},{text:"",id:Object(N.a)()}]),l=Object(j.a)(s,2),r=l[0],i=l[1],d=Object(c.useContext)(f).user;return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{action:"",children:[Object(b.jsx)("h1",{children:"create poll"}),Object(b.jsx)(u,{value:n,onChange:function(e){return a(e.target.value)},label:"Question"}),Object(b.jsx)("div",{children:r.map((function(e,t){return Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)(u,{value:e.text,onChange:function(t){return n=e.id,c=t.target.value,i((function(e){return e.map((function(e){return e.id===n?{text:c,id:n}:e}))}));var n,c},label:"#".concat(t+1," Answer")}),Object(b.jsx)(x,{onClick:function(){return t=e.id,i(r.filter((function(e){return e.id!==t})));var t},children:"Delete"})]},e.id)}))}),Object(b.jsx)(x,{onClick:function(e){e.preventDefault(),r.length<5&&i([].concat(Object(w.a)(r),[{text:"",id:Object(N.a)()}]))},children:"Add more Answers"}),Object(b.jsx)(x,{type:"submit",onClick:function(e){e.preventDefault();var t={question:n,answers:r,user:d._id};console.log(t),o.a.post("api/polls",t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},children:"Start Poll"})]})})},A=function(e){var t=Object(r.g)();return console.log(e.polls),Object(b.jsx)("div",{className:"flex flex-col items-center",children:e.polls.map((function(e){return Object(b.jsx)("div",{class:"p-2 sm:w-1/2 w-full",children:Object(b.jsxs)("div",{onClick:function(){return t("/admin/".concat(e._id))},class:"bg-gray-100 rounded flex p-4 h-full justify-between hover:bg-yellow-300",children:[Object(b.jsx)("span",{class:"title-font font-medium",children:e.question}),Object(b.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAAW0lEQVRIie3UOwqAMBBAwcE7KHj/m2gh+Gm08DixSW1nIroDqbZ4hIUlhBBeaMCKrnR4RsJROt5iz/ETfcRhzIMSb4PmoV/eSaVCVfb8nygsKh2QSaWTGUL4uAv27TYumDohlgAAAABJRU5ErkJggg=="})]})},e._id)}))})},C=function(){var e=Object(c.useContext)(f),t=e.isLoggedIn,n=e.user,a=Object(c.useState)("start"),s=Object(j.a)(a,2),l=s[0],i=s[1],m=Object(c.useState)(),h=Object(j.a)(m,2),O=h[0],g=h[1],p=Object(r.g)();return Object(c.useEffect)((function(){n?o.a.get("/api/users/"+n._id).then((function(e){g(e.data)})):p("/login")}),[]),t?O?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"text-red-600",children:"Home"}),Object(b.jsx)(x,{onClick:function(){return console.log(l)},color:"primary",children:"Tests"}),Object(b.jsx)(x,{color:"secondary",children:"Tests"}),Object(b.jsx)(u,{id:"testId",label:"Register here",value:l,onChange:function(e){return i(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)(k,{})}),Object(b.jsx)("div",{children:Object(b.jsx)(d.b,{className:"text-sm text-blue-500 hover:underline",to:"/admin/61b2361ce9190b203ee1d0f8",children:"Click here to example poll."})}),Object(b.jsx)("div",{children:Object(b.jsx)(A,{polls:O.polls})})]}):Object(b.jsx)(b.Fragment,{}):Object(b.jsx)(r.a,{to:"/login"})},S=function(e){var t=Object(r.h)().id,n=Object(c.useState)(),a=Object(j.a)(n,2),s=a[0],l=a[1],i=Object(c.useState)(),d=Object(j.a)(i,2),u=d[0],m=d[1],h=Object(c.useState)(!1),O=Object(j.a)(h,2),g=O[0],f=O[1];Object(c.useEffect)((function(){localStorage.getItem(t)&&f(!0),o.a.get("/api/polls/".concat(t)).then((function(e){l(e.data)}))}),[t]);var p=function(e){e.preventDefault();var n={pollId:t,selectedAnswer:u};o.a.post("/api/answers",n).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),f(!0),localStorage.setItem(t,!0)};return s?g?Object(b.jsx)("section",{id:"quiz-section",className:"dark:bg-gray-800 text-gray-600 body-font overflow-hidden min-h-screen bg-gray-100",children:Object(b.jsx)("form",{onSubmit:p,children:Object(b.jsx)("div",{className:"container px-5 py-24 mx-auto",children:Object(b.jsx)("div",{className:"flex flex-col items-center flex-wrap -m-12",children:Object(b.jsx)("div",{className:"dark:bg-gray-700 p-12 md:w-1/2 flex flex-col items-start bg-white",children:Object(b.jsx)("h2",{className:"dark:text-white sm:text-3xl text-2xl title-font font-medium text-gray-900 mt-4 mb-4",children:"Thanks for your participation!"})})})})})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("section",{id:"quiz-section",className:"dark:bg-gray-800 text-gray-600 body-font overflow-hidden min-h-screen bg-gray-100",children:Object(b.jsx)("form",{onSubmit:p,children:Object(b.jsx)("div",{className:"container px-5 py-24 mx-auto",children:Object(b.jsx)("div",{className:"flex flex-col items-center flex-wrap -m-12",children:Object(b.jsxs)("div",{className:"dark:bg-gray-700 p-12 md:w-1/2 flex flex-col items-start bg-white",children:[Object(b.jsxs)("span",{className:"dark:bg-gray-800 inline-block py-1 px-2 rounded bg-yellow-50 text-yellow-500 text-xs font-medium tracking-widest",children:[s.owner," asks"]}),Object(b.jsx)("h2",{className:"dark:text-white sm:text-3xl text-2xl title-font font-medium text-gray-900 mt-4 mb-4",children:s.question}),Object(b.jsx)("div",{onChange:function(e){m(e.target.value)},children:s.answers.map((function(e,t){return Object(b.jsxs)("div",{className:"dark:text-gray-400 flex items-center mr-4 mb-4",children:[Object(b.jsx)("input",{type:"radio",id:e.id,name:"answer",value:e.id,className:"hidden"}),Object(b.jsxs)("label",{htmlFor:e.id,className:"flex items-center cursor-pointer text-xl",children:[Object(b.jsx)("span",{className:"w-8 h-8 inline-block mr-2 rounded-full border border-grey flex-no-shrink"}),e.text]})]},e.id)}))}),Object(b.jsx)(x,{type:"submit",children:"Vote"})]})})})})})}):Object(b.jsx)(b.Fragment,{})},I=n(30),L=n(32),T=n.n(L),E=function(){var e=Object(r.h)().id,t=Object(c.useContext)(f),n=t.isLoggedIn,a=(t.user,Object(c.useState)()),s=Object(j.a)(a,2),l=s[0],i=s[1],d=Object(c.useState)([]),u=Object(j.a)(d,2),m=u[0],h=u[1],O="".concat(window.location.href.split("/admin")[0],"/polls/").concat(e);console.log(O);var g=function(){o.a.get("/api/polls/".concat(e)).then((function(e){i(e.data),h(Object(w.a)(e.data.answers.map((function(e){return[e.text,e.votes,"#fbbf24",null]}))))}))};return Object(c.useEffect)((function(){g()}),[e]),n?l?Object(b.jsxs)("div",{className:"flex justify-around flex-wrap",children:[Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsx)(I.a,{chartType:"ColumnChart",loader:Object(b.jsx)("div",{children:"Loading Chart"}),data:[["Element","votes",{role:"style"},{sourceColumn:0,role:"annotation",type:"string",calc:"stringify"}]].concat(Object(w.a)(m)),options:{title:l.question,width:1200,height:800,bar:{groupWidth:"95%"},legend:{position:"none"}},rootProps:{"data-testid":"6"}}),Object(b.jsx)(x,{className:"",onClick:function(){return g()},children:"Refresh"})]}),Object(b.jsxs)("div",{className:"flex justify-center items-center flex-col",children:[Object(b.jsx)(T.a,{size:521,value:O}),Object(b.jsx)("p",{className:"mt-2",children:O})]})]}):Object(b.jsx)(b.Fragment,{}):Object(b.jsx)(r.a,{to:"/login"})};var F=function(){return o.a.get("/api/").then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(y,{}),Object(b.jsxs)(r.d,{children:[Object(b.jsx)(r.b,{path:"/",element:Object(b.jsx)(C,{})}),Object(b.jsx)(r.b,{path:"/signup",element:Object(b.jsx)(m,{})}),Object(b.jsx)(r.b,{path:"/login",element:Object(b.jsx)(v,{})}),Object(b.jsx)(r.b,{path:"/polls/:id",element:Object(b.jsx)(S,{})}),Object(b.jsx)(r.b,{path:"/admin/:id",element:Object(b.jsx)(E,{})})]})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),s(e),l(e)}))};l.a.render(Object(b.jsx)(d.a,{children:Object(b.jsx)(p,{children:Object(b.jsx)(F,{})})}),document.getElementById("root")),U()}},[[66,1,2]]]);
//# sourceMappingURL=main.929c0e17.chunk.js.map